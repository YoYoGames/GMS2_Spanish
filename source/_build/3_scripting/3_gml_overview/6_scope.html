<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
"http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<meta name="keywords" content="online documentation, web online help, web help, chm2web" />
<meta http-equiv="Content-Style-Type" content="text/css" />
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />

<meta name="generator" content="chm2web Pro 2.85 (unicode)" />
<title>Variables And Variable Scope</title>
<meta http-equiv="X-UA-Compatible" content="IE=9">

<link rel="stylesheet" href="../../../../files/helpindex.css" type=
"text/css">
<link rel="stylesheet" href="../../../../default.css" type=
"text/css">

<script type="text/JavaScript" src="../../../../files/supply.js"></script>
<script type="text/JavaScript">
chmtop.c2wtopf.pageid = "_build/3_scripting/3_gml_overview/6_scope.html";
</script>

</head>
<body><script type="text/JavaScript"> 
if (window.name != "content") 
  document.write(" <table width=\"100%\" bgcolor=\"#e1e1e1\"cellspacing=\"2\" cellpadding=\"0\" style=\"border-collapse: collapse; font-family: sans-serif; font-size: 14px; color: #000000; text-decoration: none;  \"> <tr> <td align=\"center\" style=\"border-bottom: 2px solid gray\" > <br>&nbsp;Click <a href=\"../../../../index.html?page=source%2F_build%2F3_scripting%2F3_gml_overview%2F6_scope.html\">here</a> to show toolbars of the Web Online Help System: <a href=\"../../../../index.html?page=source%2F_build%2F3_scripting%2F3_gml_overview%2F6_scope.html\">show toolbars</a><br>&nbsp;</td></tr></table><br> "); 
</script>
<!-- !chm2web! --><script type="text/JavaScript">
 if( typeof(chmtop.helpStyle) != 'undefined' ) { var linkNodes = document.getElementsByTagName("link");  for( var i=0; i < linkNodes.length; ++i ) { var link = linkNodes[i];    if( link.href.endsWith("default.css")) {    var style = link.href.replace("default.css", chmtop.helpStyle); document.write('<link id="newstyleLink" rel="stylesheet" href=' + style + ' type="text/css">');    break; } } } 
</script><h2> Variables y alcance variable </h2><div class="body-scroll"><p><br></p><p> Como cualquier lenguaje de programación, <b>GML</b> usa <i>variables</i> como la unidad básica para la mayoría de las operaciones de programación. Las variables se utilizan para almacenar información en la memoria de los dispositivos para su uso posterior (o instantáneo), y se les asigna un nombre para que pueda referirse a ellos en funciones y scripts. Una variable en <b>GML</b> puede almacenar muchos tipos de datos diferentes, como un número real (como 100, 2.456575, -56, etc...), una cadena (como &quot;¡Hola mundo!&quot;), Un número entero (como 1, 556, -7 ), o un booleano ( <tt>true</tt> o <tt>false</tt> ) </p><p> Una variable es algo que utilizamos para almacenar un valor para usar en una o más operaciones o funciones. Piense en &quot;pi&quot;, por ejemplo... es una variable del mundo real que tiene el valor 3.14159265 (etc...). ¿Por qué? ¡Bien, es mucho más fácil decirle a alguien &quot;pi&quot; que &quot;tres puntos uno cuatro uno cinco nueve dos seis cinco&quot;! Entonces, nombrar cosas hace la vida mucho más simple y también significa que si el valor de esa variable cambia alguna vez, no tenemos que cambiar el número en todas partes ya que el <i>nombre de</i> la variable sigue siendo el mismo. En <b>GML,</b> una variable tiene un nombre que debe comenzar con una letra y puede contener solo letras, números y el símbolo de subrayado &#39;_&#39; con una longitud máxima de 64 símbolos. Entonces, las variables válidas son cosas como <tt>fish</tt>, <tt>foo_bar</tt>, <tt>num1</tt>, y las variables inválidas serían <tt>6fish</tt>, <tt>foo bar</tt>, o <tt>*num</tt>. </p><p> Ahora, en muchos lenguajes de programación necesita &quot;declarar&quot; una variable antes de poder usarla. Esto básicamente significa que le dice a la computadora el nombre que desea usar para que pueda asignar un lugar en la memoria para almacenar cualquier valor que decida mantener en esa variable. Con <b>GML</b>, eso no siempre es necesario ya que depende del <i>alcance</i> de la variable. Hay cuatro categorías de variables principales cuando programa con <i><span class="notranslate">GameMaker Studio 2</span></i> y cada una tiene su propio <i>alcance</i> (que se puede considerar como su área de operación o alcance). Estas variables y su alcance se detallan a continuación: </p><blockquote> <label class="collapse" for="one">Variables de instancia</label> <input id="one" type="checkbox"><div class="index_list"><p> Una variable de instancia se crea dentro de una instancia de un objeto y se considera única para esa instancia, es decir, muchas instancias del mismo objeto pueden tener la misma variable, pero cada variable puede contener un valor diferente ya que son únicas para cada instancia. Pero, <i>¿cómo</i> se crea una variable de instancia? Bueno, creas nuevas variables simplemente asignándoles un valor como se muestra en este pequeño ejemplo: </p><p class="code">potions = 12;<br>
life = 100;<br>
name = "Jock MacSweeney";<br>
strength = 5.5;<br>
armour = -2;<br><span class="notranslate"></span></p><p> Como puede ver, solo tiene que dar el nombre y luego un valor (ya sea numérico o una cadena) para establecer esa variable y tenerla lista para su uso dentro de una instancia del objeto que está codificando. Estas variables se pueden usar y modificar de varias maneras desde dentro de la instancia, por ejemplo, este código podría estar en un evento de colisión y usarse para quitar una cantidad de la variable &quot;vida&quot;: </p><p class="code">life -= 5 + armour;<br><span class="notranslate"></span></p><p> Si &quot;vida&quot; está en 100, ahora tendrá un valor de 97 (100 - (5 + -2) = 97). Ahora, eso es un ejemplo sencillo, y se <i>podía</i> sustituir &quot;armadura&quot; para el valor real de -2, pero ¿qué ocurre si se utiliza ese valor en múltiples lugares y luego decide cambiarlo? Tendría que pasar por TODO su código y cambiar cada -2 a lo que sea que sea el nuevo valor, ¡que consume mucho tiempo y es muy propenso a errores! Pero si usa una variable, todo lo que tiene que hacer es reasignarle un nuevo valor y el código usará automáticamente ese nuevo valor a partir de ese momento, haciendo las cosas mucho más flexibles y mucho más fáciles de corregir en caso de que haya algún problema. También se debe tener en cuenta que incluso si un valor no va a cambiar, es mucho más fácil recordar lo que significa una variable llamada &quot;vida&quot; en lugar de simplemente mirar un número. </p><p> <i><span class="notranslate">GameMaker Studio 2</span></i> tiene una colección de variables de instancia &quot;integradas&quot;, por lo que debe tenerlas en cuenta ya que puede asignar el mismo nombre a una de sus variables de instancia o bien, desea tener su propia variable global con el mismo nombre y preguntarse por qué están recibiendo errores Sin embargo, son fáciles de detectar, ya que se muestran en un color diferente en el editor de código y también aparecen en la barra de autocompletado en la parte inferior. </p><p> Hay un par de funciones diseñadas para ayudarlo cuando se trata de variables de instancia (principalmente para usar con <a href=
"../../1_overview/3_additional_information/obsolete_functions.html">Scrpts de Compatibilidad</a> para proyectos importados y el código para acciones de Arrastrar y Soltar, pero también se pueden usar en otros lugares): </p><ul><li> <a href=
"variable_functions/variable_instance_exists.html"><tt>variable_instance_exists</tt></a> </li><li> <a href=
"variable_functions/variable_instance_get.html"><tt>variable_instance_get</tt></a> </li><li> <a href=
"variable_functions/variable_instance_set.html"><tt>variable_instance_set</tt></a> </li><li> <a href=
"variable_functions/variable_instance_get_names.html"><tt>variable_instance_get_names</tt></a> </li></ul></div><br> <label class="collapse" for="two">Variables locales</label> <input id="two" type="checkbox"><div class="index_list"><p> Una variable local es aquella que creamos para un evento específico <i>solamente</i> y luego descarta cuando el <b>evento</b> ha finalizado (la única excepción a esto es en los recursos de script, donde un <tt>var</tt> la variable declarada es local para el script y luego descartada). ¿Por qué los necesitamos? Bueno, las variables ocupan espacio en la memoria y es posible que solo las usemos para una operación o función, en cuyo caso solo necesitamos tenerla en la memoria durante el corto tiempo que se usa. Esto mantiene su base de código limpia y ordenada, además de mantener el espacio de memoria optimizado para las cosas que realmente lo necesitan. Para declarar una variable local usamos la función <tt>var</tt> Me gusta esto: </p><p class="code">var i, num, str;<br>
i = 0;<br>
num = 24.5;<br>
str = "Hi there!";<br><span class="notranslate"></span></p><p> Todas las variables creadas anteriormente serán &quot;olvidadas&quot; (es decir, eliminadas de la memoria) al final del evento (o secuencia de comandos) en la que fueron creadas. Debes tener cuidado de que el nombre que le des <tt>var</tt> las variables declaradas no coinciden con otra variable de instancia dentro del objeto que ejecuta el código, y también aseguran que no tienen la intención de utilizar el valor almacenado en esa variable fuera del evento en el que lo declaran. Estas variables se usan mucho en los programas, especialmente en bucles para contar iteraciones, o cuando se usa un valor varias veces en una operación que no se repetirá nuevamente. Aquí hay otro par de ejemplos: </p><p class="code">var i = 0;<br>
repeat (10)<br>
&nbsp;&nbsp;&nbsp;{<br>
&nbsp;&nbsp;&nbsp;inventory[i] = 0;<br>
&nbsp;&nbsp;&nbsp;i+=1;<br>
&nbsp;&nbsp;&nbsp;}<br><span class="notranslate"></span></p><p> El código anterior crea una variable local llamada &quot;i&quot; y la pone a 0, todos en la misma línea. Tenga en cuenta que en las versiones anteriores de <i><span class="notranslate">GameMaker</span></i>, primero tenía que declarar sus variables locales y <i>luego</i> asignarles valores, pero en esta versión puede declararlas <i>y</i> asignarles un valor al mismo tiempo. El código anterior utiliza esta variable para inicializar una matriz. Como la variable &quot;i&quot; no se utilizará para otras funciones en la instancia que no sea esta, puede ser de alcance local. Aquí hay un ejemplo más: </p><p class="code">var xx,yy;<br>
xx = x - 32 +irandom(64);<br>
yy = y - 32 +irandom(64);<br>
instance_create_layer(xx, yy, "Effects", obj_blood);<br><span class="notranslate"></span></p><p> Aquí hemos utilizado las variables locales para almacenar algunas coordenadas aleatorias que luego usamos para crear una instancia. En este ejemplo, puede ver que no es estrictamente necesario que usemos estas variables, pero por el bien de la legibilidad y la facilidad de uso, lo hacemos. Es MUCHO más claro y obvio lo que estamos haciendo allí que si usáramos este código: </p><p class="code">instance_create_layer(x - 32 + irandom(64), y - 32
+ irandom(64), "Effects", obj_guts);<span class="notranslate"></span></p><p> Otra cosa sobre <tt>var</tt> se deben tener en cuenta las variables declaradas... Como son exclusivas del evento que las ejecuta, también se pueden usar en otras instancias a través del código. Esto significa que podemos usar estas variables para establecer y cambiar cosas en otras instancias utilizando el constructo &quot;con ()&quot; (hay una sección sobre esto en la sección <b>Descripción general de GML</b> del manual). El código real en sí se vería así: </p><p class="code">var num = instance_number(obj_Enemy);<br>
with (obj_Enemy)<br>
&nbsp;&nbsp;&nbsp;{<br>
&nbsp;&nbsp;&nbsp;if num&gt;10 instance_destroy();<br>
&nbsp;&nbsp;&nbsp;}<br><span class="notranslate"></span></p><p> El código anterior funciona porque el <tt>var</tt> la variable declarada es local al <i>evento</i> (o secuencia de comandos) en la que está contenida, no la instancia, ni el mundo del juego, y por lo tanto puede usarse en cualquier función en cualquier objeto, siempre que esté en el mismo bloque de código. </p></div><br> <label class="collapse" for="three">Variables globales</label> <input id="three" type="checkbox"><div class="index_list"><p> Una descripción básica de una variable global es aquella que, una vez declarada, no pertenece a ninguna instancia en particular y, sin embargo, todos pueden acceder a ella. Al igual que las variables locales, las variables globales deben declararse, pero a diferencia de una variable local, una variable global permanece en la memoria hasta el final del juego. Por lo tanto, puede crear una variable global para realizar un seguimiento de (por ejemplo) el número de balas que tiene el jugador y luego simplemente actualizar esta variable en diferentes puntos del juego. Una variable global no pertenece a ninguna instancia específica y puede ser accedida, cambiada y utilizada por todas las instancias en cualquier momento, pero cualquier cambio realizado a la variable es &quot;global&quot;, en el sentido de que todas las instancias que usan la variable se verán afectadas por el cambio.. Echemos un vistazo a un ejemplo: </p><p class="code">global.food = 5;<br><span class="notranslate"></span></p><p> Declaramos la variable &quot;comida&quot; escribiendo primero &quot;global&quot; y luego un &quot;.&quot; decirle a <i><span class="notranslate">GameMaker Studio 2</span></i> que esta variable es ahora alcance global. Tendremos que usar este método a partir de ahora en cualquier momento en que tengamos que acceder o modificar esta variable de alguna manera. Entonces, hemos creado una nueva variable llamada &quot;comida&quot; y la hemos declarado global. Ahora, cualquier instancia puede usar y cambiar esta variable de cualquier manera y todas las demás instancias &quot;verán&quot; esto. Por ejemplo, podríamos tener un objeto de comida diferente con el que colisiona el jugador y en el caso de colisión tenemos: </p><p class="code">global.food +=1;<br><span class="notranslate"></span></p><p> También tenemos otro objeto que dibuja este valor así: <br></p><p class="code">draw_text(32, 32, "food = " +
string(global.food));<br><span class="notranslate"></span></p><p> Con las variables globales podemos cambiar los valores y ver esos cambios reflejados en todas las instancias de los objetos que hacen referencia a esta variable. Al igual que con <i>las</i> variables <i>locales</i>, debe tener cuidado de no nombrar sus variables globales como cualquier variable de instancia, ya que eso le ocasionará problemas y hará que los errores entren en sus juegos debido al solapamiento variable, que a veces puede ser un problema difícil de depurar. En general, debe tener un único script u objeto que declare todas sus variables globales desde el inicio del juego (por ejemplo, en el Evento de inicio de la sala), para que se inicialicen y estén listas para que cualquier instancia las use, y esto también le brinda un lugar útil para regresar y referencia en caso de que necesite verificar el nombre de una variable. </p><p> <i><span class="notranslate">GameMaker Studio 2</span></i> tiene una colección de variables globales &quot;integradas&quot;, por lo que debe tenerlas en cuenta ya que puede asignar el mismo nombre a una de sus variables de instancia o desea tener su propia variable global con el mismo nombre y preguntarse por qué está obteniendo errores! Sin embargo, son fáciles de detectar, ya que se muestran en un color diferente en el editor de código y también aparecen en la barra de autocompletado en la parte inferior. La mayoría de las variables globales integradas son muy específicas y solo se usarán en raras ocasiones, y se enumeran en las secciones apropiadas del manual, pero hay una importante que se usa con frecuencia y no se encuentra en otra parte: </p><blockquote><ul><li> <a href=
"built_in_variables/async_load.html"><tt>async_load</tt></a> </li></ul></blockquote><p> También hay tres variables globales incorporadas en <b>desuso</b> que debe tener en cuenta (estas variables solo están diseñadas para admitir proyectos heredados de versiones anteriores de <i><span class="notranslate">GameMaker</span></i> y <b><i>no deben usarse en proyectos nuevos</i></b> ): </p><blockquote><ul><li> <a href="built_in_variables/score.html"><tt>score</tt></a> </li><li> <a href="built_in_variables/health.html"><tt>health</tt></a> </li><li> <a href="built_in_variables/lives.html"><tt>lives</tt></a> </li></ul></blockquote><p> El siguiente método también se puede usar para declarar variables globales, pero <i><b>solo se incluye para compatibilidad con versiones anteriores</b></i>, y no se recomienda utilizar este método para proyectos nuevos, ya que las versiones futuras de <i><span class="notranslate">GameMaker Studio</span> 2</i> pueden no ser compatibles. </p><p> El segundo método para crear variables globales es declararlas como tales utilizando el <tt>globalvar</tt> declaración, tanto como lo haría con una variable local utilizando <tt>var</tt> declaración. </p><div class="note"> <b>¡IMPORTANTE!</b> los <tt>globalvar</tt> la declaración está en <b>desuso</b> y solo es compatible con fines heredados. <b>Siempre</b> debe usar la <tt>global.</tt> identificador para marcar variables globales. </div><p><br> Esta declaración (obsoleta) se usará de la siguiente manera: </p><p class="code">globalvar food;<br>
food = 5;<br><span class="notranslate"></span></p><p> Una vez declarado de esta manera, la variable &quot;comida&quot; ahora se considera global y no requiere <tt>global.</tt> prefijo, que también significa que es mucho más difícil identificar variables globales en su código y también es mucho más fácil obtener superposición variable ya que usa el mismo nombre de variable en diferentes objetos o extensiones que haya instalado. Una vez declarado de esta manera, se accede a la variable global de la siguiente manera: </p><p class="code">food += 2;<br><span class="notranslate"></span></p><p> o: </p><p class="code">draw_text(32, 32, "food = " +
string(food));<br><span class="notranslate"></span></p><p> Como puede ver, sin nada que demuestre que la variable es de alcance global, se está configurando potencialmente para que surjan muchos problemas sutiles en su juego, por lo que esta declaración debe evitarse. </p><p> Hay un par de funciones diseñadas para ayudarlo cuando se trata de variables globales (principalmente para usar con <a href=
"../../1_overview/3_additional_information/obsolete_functions.html">scripts de compatibilidad</a> para proyectos importados y el código para acciones de arrastrar y soltar, pero también se pueden usar en otros lugares): </p><ul><li> <a href=
"variable_functions/variable_global_exists.html"><tt>variable_global_exists</tt></a> </li><li> <a href=
"variable_functions/variable_global_get.html"><tt>variable_global_get</tt></a> </li><li> <a href=
"variable_functions/variable_global_set.html"><tt>variable_global_set</tt></a> </li></ul></div><br> <label class="collapse" for="four">Variables integradas</label> <input id="four" type="checkbox"><div class="index_list"><p> Las variables integradas son variables especiales que están &quot;integradas&quot; en los objetos y las salas en el mundo del juego y pueden ser de instancia o de alcance global (pero <i>nunca</i> locales). Algunas variables globales se enumeran en la sección anterior, y las diferentes secciones del manual de sprites, salas, objetos, etc.... también describen las variables incorporadas disponibles. Ejemplos de tales variables de instancia incorporadas serían: </p><blockquote><ul><li> <a href=
"../4_gml_reference/instances/instance_variables/sprite_index.html"><tt>sprite_index</tt></a> </li><li> <a href=
"../4_gml_reference/instances/instance_variables/path_scale.html"><tt>
path_scale</tt></a> </li><li> <a href=
"../4_gml_reference/instances/instance_variables/speed.html"><tt>speed</tt></a> </li></ul></blockquote><p> Y ejemplos de variables globales integradas serían: </p><blockquote><ul><li> <a href=
"../4_gml_reference/cameras%20and%20display/cameras/view_xport.html"><tt>view_xport</tt></a> </li><li> <a href=
"../4_gml_reference/miscellaneous/gm_version.html"><tt>GM_version</tt></a> </li><li> <a href=
"../4_gml_reference/rooms/general/room_speed.html"><tt>room_speed</tt></a> </li></ul></blockquote><p> Las variables incorporadas se pueden cambiar y establecer como la mayoría de las otras variables, y algunas incluso pueden ser matrices, solo que no es necesario configurarlas para crearlas como lo haría con una variable regular ya que ya se inicializarán con un valor predeterminado. </p></div><br> <label class="collapse" for="five">Macros (Constantes)</label> <input id="five" type="checkbox"><div class="index_list"><p> Si bien no son exactamente variables, las macros son similares a ellas en la forma en que se usan, es decir: se nombran valores que puede usar en todo su código para reemplazar valores duros. Básicamente, una macro (también llamada <b>constante</b> cuando se usa así) es una variable con nombre que contiene un único valor constante (o cadena). Puede definir sus propias constantes usando el <a href=
"../../2_interface/1_editors/scripts.html">Editor de scripts</a> y luego usarlas en su código y DnD como si fueran variables regulares, con la única diferencia de que no <i>se pueden cambiar en el juego</i>. Por ejemplo, supongamos que define la siguiente macro como una constante (tenga en cuenta el &quot;#&quot; anterior y la falta de dos puntos &quot;;&quot; al final): </p><p class="code">#macro total_weapons 10<br><span class="notranslate"></span></p><p> A continuación, podría llamar esto en su código de esta manera: </p><p class="code">if ++pos == total_weapons<br>
&nbsp;&nbsp;&nbsp;{<br>
&nbsp;&nbsp;&nbsp;pos = 0;<br>
&nbsp;&nbsp;&nbsp;}<br><span class="notranslate"></span></p><p> Tenga en cuenta que no podrá cambiar el valor constante, por lo que un código como este hará que el juego se cuelgue: </p><p class="code">total_weapons = 11;<br><span class="notranslate"></span></p><p> Puede definir una macro en cualquier parte de su código o scripts y se <i>precompilará</i> e incluirá en su juego como si estuviera allí desde el principio, pero le recomendamos que cree un recurso de script dedicado y defina todas sus macros allí. ¡Será más fácil organizarlo y depurarlo más tarde! </p><p> Si necesita cambiar el valor de una macro en tiempo de ejecución, probablemente debería convertirla en una variable global, ya que puede cambiarse de código durante un juego, a menos que configure la macro como una <i>función</i>. Al establecer la macro en una función, significa que se llamará a esta función cada vez que use la macro. Por ejemplo: </p><p class="code">#macro col make_colour_hsv(irandom(255), 255,
255)<span class="notranslate"></span></p><p> Entonces llamarías a esta macro algo así: </p><p class="code">image_blend = col;<span class="notranslate"></span></p><p> El uso de este código hará que la imagen combine un color diferente cada vez que se utiliza la macro. </p></div></blockquote><p><br></p></div><div class="footer"><div class="buttons"><div class="clear"><div style="float:left"> Atrás: <a href="index.html">Descripción general de GML</a> </div><div style="float:right"> Siguiente: <a href=
"7_addressing_variables.html">direccionamiento de variables en otras instancias</a> </div></div></div><h5> © Copyright <span class="notranslate">YoYo Games Ltd.</span> 2017 Todos los derechos reservados </h5>
<script type="text/javascript">
   (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){   (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),   m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)   })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');   ga('create', 'UA-2711665-14', 'auto');   ga('send', 'pageview'); 
</script>
</div>

<script type="text/JavaScript">
var fe = FindFrame("toc", top);
if ((fe != null) && (chmtop.c2wtopf.jstree != null)) {
  if (chmtop.c2wtopf.FITEMS[chmtop.c2wtopf.pagenum] != chmtop.c2wtopf.pageid)
    chmtop.c2wtopf.jstree.OpenTreeNode("source/" + chmtop.c2wtopf.pageid);
}
</script>
</body>
</html>
