<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
"http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<meta name="keywords" content="online documentation, web online help, web help, chm2web" />
<meta http-equiv="Content-Style-Type" content="text/css" />
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />

<meta name="generator" content="chm2web Pro 2.85 (unicode)" />
<title>vertex_format_add_custom</title>
<meta http-equiv="X-UA-Compatible" content="IE=9">
<link rel="stylesheet" href=
"../../../../../../../files/helpindex.css" type="text/css">
<link rel="stylesheet" href="../../../../../../../default.css"
type="text/css">

<script type="text/JavaScript" src="../../../../../../../files/supply.js"></script>
<script type="text/JavaScript">
chmtop.c2wtopf.pageid = "_build/3_scripting/4_gml_reference/drawing/primitives/vertex formats/vertex_format_add_custom.html";
</script>

</head>
<body><script type="text/JavaScript"> 
if (window.name != "content") 
  document.write(" <table width=\"100%\" bgcolor=\"#e1e1e1\"cellspacing=\"2\" cellpadding=\"0\" style=\"border-collapse: collapse; font-family: sans-serif; font-size: 14px; color: #000000; text-decoration: none;  \"> <tr> <td align=\"center\" style=\"border-bottom: 2px solid gray\" > <br>&nbsp;Click <a href=\"../../../../../../../index.html?page=source%2F_build%2F3_scripting%2F4_gml_reference%2Fdrawing%2Fprimitives%2Fvertex%20formats%2Fvertex_format_add_custom.html\">here</a> to show toolbars of the Web Online Help System: <a href=\"../../../../../../../index.html?page=source%2F_build%2F3_scripting%2F4_gml_reference%2Fdrawing%2Fprimitives%2Fvertex%20formats%2Fvertex_format_add_custom.html\">show toolbars</a><br>&nbsp;</td></tr></table><br> "); 
</script>
<!-- !chm2web! --><script type="text/JavaScript">
 if( typeof(chmtop.helpStyle) != 'undefined' ) { var linkNodes = document.getElementsByTagName("link");  for( var i=0; i < linkNodes.length; ++i ) { var link = linkNodes[i];    if( link.href.endsWith("default.css")) {    var style = link.href.replace("default.css", chmtop.helpStyle); document.write('<link id="newstyleLink" rel="stylesheet" href=' + style + ' type="text/css">');    break; } } } 
</script><h2> vertex_format_add_custom </h2><div class="body-scroll"><p><br></p><h3> Sintaxis: </h3><p class="code">vertex_format_add_custom(type, usage);<span class="notranslate"></span></p><p><br></p><div><table><tr><th> Argumento </th><th> Descripción </th></tr><tr><td> <span class="notranslate">type</span> </td> <td> El tipo de datos que contendrán estos datos de vértices personalizados (consulte las <b><i>constantes de tipos que se</i></b> enumeran a continuación). </td></tr><tr class="alt"><td> <span class="notranslate">usage</span> </td> <td> El uso que obtendrán los datos (consulte las <b><i>constantes de uso que se</i></b> enumeran a continuación). </td></tr></table></div><p><br></p><h3> Devoluciones: </h3><p class="code">N/A<span class="notranslate"></span></p><p><br></p><h3> Descripción </h3><blockquote><p> Esta función le permite usar un tipo de datos personalizado para atributos de formato de vértice específicos como parte del nuevo formato de vértice que se está creando. Los valores disponibles para usar están definidos por la constante de tipo de datos que elija, que se enumeran a continuación: </p><p><br></p><div class="compat"><table><tr><th> Constante </th><th> Descripción </th></tr><tr><td> <span class="notranslate">vertex_type_float1</span> </td> <td> Un solo valor de punto flotante </td></tr><tr class="alt"><td> <span class="notranslate">vertex_type_float2</span> </td> <td> Dos valores de punto flotante </td></tr><tr><td> <span class="notranslate">vertex_type_float3</span> </td> <td> Tres valores de punto flotante </td></tr><tr class="alt"><td> <span class="notranslate">vertex_type_float4</span> </td> <td> Cuatro valores de punto flotante </td></tr><tr><td> <span class="notranslate">vertex_type_colour</span> </td> <td> Cuatro valores componentes (r, g, b, a) </td></tr><tr class="alt"><td> <span class="notranslate">vertex_type_ubyte4</span> </td> <td> Cuatro componentes de byte sin signo (de 0 a 255) </td></tr></table></div><p><br> El uso de estas constantes también se debe definir para que los valores puedan &quot;vincularse&quot; correctamente dentro del sombreado que se está creando. Esto es necesario debido al hecho de que DX y OpenGL tienen diferentes requisitos, por lo que si no los vincula correctamente, no aparecerán directamente en el sombreador. Las constantes de uso disponibles que puede elegir se enumeran a continuación y las que use dependerán de las características específicas del sombreador que se está creando: </p><p><br></p><div class="compat"><table><tr><th> Constante </th><th> Descripción </th></tr><tr><td> <span class="notranslate">vertex_usage_position</span> </td> <td> valores de posición (x, y, z) </td></tr><tr class="alt"><td> <span class="notranslate">vertex_usage_colour</span> </td> <td> valores de color (r, g, b, a) </td></tr><tr><td> <span class="notranslate">vertex_usage_normal</span> </td> <td> Valores normales de vértice (nx, ny, nz) </td></tr><tr class="alt"><td> <span class="notranslate">vertex_usage_textcoord</span> </td> <td> Coordenadas UV (u, v) </td></tr><tr><td> <span class="notranslate">vertex_usage_blendweight</span> </td> <td> el peso de mezcla de la matriz de entrada (por ejemplo, para la animación esquelética) </td></tr><tr class="alt"><td> <span class="notranslate">vertex_usage_blendindices</span> </td> <td> los índices de las matrices a utilizar (para la animación esquelética, por ejemplo) </td></tr><tr><td> <span class="notranslate">vertex_usage_depth</span> </td> <td> valor de búfer de profundidad de vértice </td></tr><tr class="alt"><td> <span class="notranslate">vertex_usage_tangent</span> </td> <td> valores tangentes </td></tr><tr><td> <span class="notranslate">vertex_usage_binormal</span> </td> <td> valores binormales </td></tr><tr class="alt"><td> <span class="notranslate">vertex_usage_fog</span> </td> <td> valores de niebla </td></tr><tr><td> <span class="notranslate">vertex_usage_sample</span> </td> <td> índice de muestra </td></tr></table></div><p><br> Hay algunas cosas importantes a tener en cuenta cuando se utilizan formatos personalizados como estos: </p><ul><li> los <tt>vertex_format_add_custom()</tt> función solo soporta <tt>vertex_usage_position</tt>, <tt>vertex_usage_colour</tt>, <tt>vertex_usage_normal</tt> y <tt>vertex_usage_textcoord</tt> cuando se utilizan sombreadores GLSL. Estos se asignarán a los atributos de sombreado <tt>in_Position</tt>, <tt>in_Colour[0 - ...]</tt>, <tt>in_Normal</tt> respectivamente (cualquier cosa que no sea uno de estos tres atributos, por ejemplo: coordenadas de textura, se puede asignar a cualquier atributo que defina). </li><li style="list-style: none"><br></li><li> En general debes usar <tt>vertex_usage_textcoord</tt> para todos los parámetros extra donde sea posible, como tipos como <tt>vertex_usage_blendweight</tt> y <tt>vertex_usage_tangent</tt> están casi en desuso en la mayoría de los idiomas de sombreado, y probablemente no se convertirán correctamente. En lugar de usar <tt>vec</tt>, <tt>vec2</tt>, <tt>vec3</tt> o <tt>vec4</tt> tipos <tt>vertex_usage_textcoord</tt> y todo debería funcionar bien. </li><li style="list-style: none"><br></li><li> GLSL ES <i>no</i> admite atributos enteros, por lo que pasar <tt>ivec4</tt> &#39;s no funciona (este tipo se usa generalmente cuando se pasa <tt>vertex_usage_blendindices</tt> ). Lo que hay que hacer es pasar las coordenadas de textura y luego, en el sombreado, convertirlas a <tt>ivec4</tt> Me gusta esto: <p class="code">attribute vec3 in_Position;<br>
attribute vec4 in_BlendIndices;<br>
attribute vec4 in_BlendWeights;<br>
<br>
varying vec4 v_vColour;<br>
varying mat4 v_mat;<br>
<br>
void main()<br>
{<br>
&nbsp;&nbsp;&nbsp;&nbsp;gl_Position =
gm_Matrices[MATRIX_WORLD_VIEW_PROJECTION] * vec4( in_Position.xyz,
1.0);<br>
&nbsp;&nbsp;&nbsp;&nbsp;v_vColour = in_BlendWeights;<br>
&nbsp;&nbsp;&nbsp;&nbsp; ivec4 t = ivec4(in_BlendIndices);<br>
&nbsp;&nbsp;&nbsp;&nbsp; v_mat = gm_Matrices[ t.x ];<br>
}<br><span class="notranslate"></span></p><br> Los pesos de mezcla generalmente se almacenan en una matriz y luego se accede utilizando índices de mezcla, pero aquí puede ver que en lugar de definir <tt>in_BlendIndices</tt> como un <tt>ivec4</tt> atributo, es un <tt>vec4</tt>, luego lanzar a un <tt>ivec4</tt> en el codigo Luego se usa este índice de la matriz creada usando el <tt>gm_Matrix</tt> (solo se puede acceder a una matriz usando una <tt>INT</tt> valor - no es un flotador). </li><li style="list-style: none"><br></li></ul></blockquote><p><br></p><h3> Ejemplo: </h3><p class="code">vertex_format_begin();<br>
vertex_format_add_textcoord();<br>
vertex_format_add_custom(vertex_type_float3,
vertex_usage_position);<br>
my_format = vertex_format_end();<br><span class="notranslate"></span></p><blockquote><p> El código anterior creará un nuevo formato de vértice con solo textura y 3 valores de punto flotante personalizados para la posición. A continuación, almacena el ID de formato en la variable &quot;my_format&quot;. </p></blockquote><p><br></p></div><div class="footer"><div class="buttons"><div class="clear"><div style="float:left"> Atrás: <a href="index.html">Formatos Vertex</a> </div><div style="float:right"> Siguiente: <a href=
"vertex_format_end.html">vertex_format_end</a> </div></div></div><h5>© Copyright YoYo Games Ltd. 2018 All Rights Reserved</h5>
<script type="text/javascript">
   (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){   (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),   m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)   })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');   ga('create', 'UA-2711665-14', 'auto');   ga('send', 'pageview'); 
</script>
</div>

<script type="text/JavaScript">
var fe = FindFrame("toc", top);
if ((fe != null) && (chmtop.c2wtopf.jstree != null)) {
  if (chmtop.c2wtopf.FITEMS[chmtop.c2wtopf.pagenum] != chmtop.c2wtopf.pageid)
    chmtop.c2wtopf.jstree.OpenTreeNode("source/" + chmtop.c2wtopf.pageid);
}
</script>
</body>
</html>
